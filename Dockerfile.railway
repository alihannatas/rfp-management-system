# Railway için ana Dockerfile
FROM node:18-alpine

# Çalışma dizinini ayarla
WORKDIR /app

# Docker Compose dosyasını kopyala
COPY docker-compose.railway.yml ./
COPY railway.toml ./

# Backend ve frontend klasörlerini kopyala
COPY backend/ ./backend/
COPY frontend/ ./frontend/

# Docker Compose yükle
RUN apk add --no-cache docker-compose

# Portları expose et
EXPOSE 3000 3001

# Railway'de çalıştır
CMD ["docker-compose", "-f", "docker-compose.railway.yml", "up"]
